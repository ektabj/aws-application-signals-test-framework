"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addAppStacks = void 0;
const e2eTestCommonStack_1 = require("../stacks/e2eTestCommonStack");
const ec2JavaTestStack_1 = require("../stacks/ec2JavaTestStack");
const eksJavaTestStack_1 = require("../stacks/eksJavaTestStack");
const eksMetricLimiterJavaTestStack_1 = require("../stacks/eksMetricLimiterJavaTestStack");
const eksPythonTestStack_1 = require("../stacks/eksPythonTestStack");
const eksDotnetTestStack_1 = require("../stacks/eksDotnetTestStack");
const adotE2EReleaseTestingStack_1 = require("../stacks/release-testing/adotE2EReleaseTestingStack");
const adotPythonE2EReleaseTestingStack_1 = require("../stacks/release-testing/adotPythonE2EReleaseTestingStack");
const cwAgentE2EReleaseTestingStack_1 = require("../stacks/release-testing/cwAgentE2EReleaseTestingStack");
const cwAgentOperatorE2EReleaseTestingStack_1 = require("../stacks/release-testing/cwAgentOperatorE2EReleaseTestingStack");
const enablementScriptE2EReleaseTestingStack_1 = require("../stacks/release-testing/enablementScriptE2EReleaseTestingStack");
const cwAgentOperatorPythonE2EReleaseTestingStack_1 = require("../stacks/release-testing/cwAgentOperatorPythonE2EReleaseTestingStack");
const eksPlaygroundStack_1 = require("../stacks/eksPlaygroundStack");
const githubRunnerImagesStack_1 = require("../stacks/githubRunnerImagesStack");
// List of stacks that will be added to each account
const addAppStacks = (app, { env, stage }) => {
    const stackProp = {
        env: env,
        stage: stage,
    };
    const eks_java_test_stack = new eksJavaTestStack_1.EksJavaTestStack(app, `app-signals-java-e2e-eks-${stage}-${env.region}`, stackProp);
    const eks_metric_limiter_java_test_stack = new eksMetricLimiterJavaTestStack_1.EksMetricLimiterJavaTestStack(app, `app-signals-java-e2e-eks-metric-limite-${stage}-${env.region}`, stackProp);
    const ec2_java_test_stack = new ec2JavaTestStack_1.Ec2JavaTestStack(app, `app-signals-java-e2e-ec2-${stage}-${env.region}`, stackProp);
    const eks_python_test_stack = new eksPythonTestStack_1.EksPythonTestStack(app, `app-signals-python-e2e-eks-${stage}-${env.region}`, stackProp);
    const eks_dotnet_test_stack = new eksDotnetTestStack_1.EksDotnetTestStack(app, `app-signals-dotnet-e2e-eks-${stage}-${env.region}`, stackProp);
    const e2e_test_common_stack = new e2eTestCommonStack_1.E2ETestCommonStack(app, `github-provider-role-${stage}-${env.region}`, stackProp);
    // The release testing stacks will be added to the us-east-1 account. There is a limit on how many EKS clusters
    // may be added to each account, and will need to request a service quote increase if more are needed.
    let adot_e2e_release_testing_stack;
    let adot_python_e2e_release_testing_stack;
    let cw_agent_e2e_release_testing_stack;
    let cw_agent_operator_e2e_release_testing_stack;
    let cw_agent_operator_python_e2e_release_testing_stack;
    let enablement_script_e2e_release_testing_stack;
    let github_runner_images_stack;
    let eks_playground_stack;
    if (env.region === 'us-east-1') {
        adot_e2e_release_testing_stack = new adotE2EReleaseTestingStack_1.AdotE2EReleaseTestingStack(app, `adot-e2e-release-testing-${stage}-${env.region}`, stackProp);
        adot_python_e2e_release_testing_stack = new adotPythonE2EReleaseTestingStack_1.AdotPythonE2EReleaseTestingStack(app, `adot-python-e2e-release-testing-${stage}-${env.region}`, stackProp);
        cw_agent_e2e_release_testing_stack = new cwAgentE2EReleaseTestingStack_1.CWAgentE2EReleaseTestingStack(app, `cw-agent-e2e-release-testing-${stage}-${env.region}`, stackProp);
        cw_agent_operator_e2e_release_testing_stack = new cwAgentOperatorE2EReleaseTestingStack_1.CWAgentOperatorE2EReleaseTestingStack(app, `cw-agent-operator-e2e-release-testing-${stage}-${env.region}`, stackProp);
        cw_agent_operator_python_e2e_release_testing_stack = new cwAgentOperatorPythonE2EReleaseTestingStack_1.CWAgentOperatorPythonE2EReleaseTestingStack(app, `cw-agent-operator-python-e2e-release-testing-${stage}-${env.region}`, stackProp);
        enablement_script_e2e_release_testing_stack = new enablementScriptE2EReleaseTestingStack_1.EnablementScriptE2EReleaseTestingStack(app, `enablement-script-e2e-release-testing-${stage}-${env.region}`, stackProp);
        github_runner_images_stack = new githubRunnerImagesStack_1.GithubRunnerImagesStack(app, `github-runner-images-${stage}-${env.region}`, stackProp);
        eks_playground_stack = new eksPlaygroundStack_1.EksPlaygroundStack(app, `eks-playground-${stage}-${env.region}`, stackProp);
    }
    return {
        eks_java_test_stack,
        eks_metric_limiter_java_test_stack,
        ec2_java_test_stack,
        eks_python_test_stack,
        eks_dotnet_test_stack,
        e2e_test_common_stack,
        adot_e2e_release_testing_stack,
        adot_python_e2e_release_testing_stack,
        cw_agent_e2e_release_testing_stack,
        cw_agent_operator_e2e_release_testing_stack,
        cw_agent_operator_python_e2e_release_testing_stack,
        enablement_script_e2e_release_testing_stack,
        github_runner_images_stack,
        eks_playground_stack,
    };
};
exports.addAppStacks = addAppStacks;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwU3RhY2tzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbGliL2RlcGxveS9hcHBTdGFja3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEscUVBQWtFO0FBQ2xFLGlFQUE4RDtBQUM5RCxpRUFBOEQ7QUFDOUQsMkZBQXdGO0FBQ3hGLHFFQUFrRTtBQUNsRSxxRUFBa0U7QUFDbEUscUdBQWtHO0FBQ2xHLGlIQUE4RztBQUM5RywyR0FBd0c7QUFDeEcsMkhBQXdIO0FBQ3hILDZIQUEwSDtBQUMxSCx1SUFBb0k7QUFDcEkscUVBQWtFO0FBRWxFLCtFQUE0RTtBQTBCNUUsb0RBQW9EO0FBQzdDLE1BQU0sWUFBWSxHQUFHLENBQUMsR0FBUSxFQUFFLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBa0IsRUFBYSxFQUFFO0lBQ2hGLE1BQU0sU0FBUyxHQUFHO1FBQ2QsR0FBRyxFQUFFLEdBQUc7UUFDUixLQUFLLEVBQUUsS0FBSztLQUNmLENBQUM7SUFFRixNQUFNLG1CQUFtQixHQUFxQixJQUFJLG1DQUFnQixDQUM5RCxHQUFHLEVBQ0gsNEJBQTRCLEtBQUssSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLEVBQ2pELFNBQVMsQ0FDWixDQUFDO0lBRUYsTUFBTSxrQ0FBa0MsR0FBa0MsSUFBSSw2REFBNkIsQ0FDdkcsR0FBRyxFQUNILDBDQUEwQyxLQUFLLElBQUksR0FBRyxDQUFDLE1BQU0sRUFBRSxFQUMvRCxTQUFTLENBQ1osQ0FBQztJQUVGLE1BQU0sbUJBQW1CLEdBQXFCLElBQUksbUNBQWdCLENBQzlELEdBQUcsRUFDSCw0QkFBNEIsS0FBSyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFDakQsU0FBUyxDQUNaLENBQUM7SUFFRixNQUFNLHFCQUFxQixHQUF1QixJQUFJLHVDQUFrQixDQUNwRSxHQUFHLEVBQ0gsOEJBQThCLEtBQUssSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLEVBQ25ELFNBQVMsQ0FDWixDQUFDO0lBRUYsTUFBTSxxQkFBcUIsR0FBdUIsSUFBSSx1Q0FBa0IsQ0FDcEUsR0FBRyxFQUNILDhCQUE4QixLQUFLLElBQUksR0FBRyxDQUFDLE1BQU0sRUFBRSxFQUNuRCxTQUFTLENBQ1osQ0FBQztJQUVGLE1BQU0scUJBQXFCLEdBQXVCLElBQUksdUNBQWtCLENBQ3BFLEdBQUcsRUFDSCx3QkFBd0IsS0FBSyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFDN0MsU0FBUyxDQUNaLENBQUM7SUFFRiwrR0FBK0c7SUFDL0csc0dBQXNHO0lBQ3RHLElBQUksOEJBQThCLENBQUM7SUFDbkMsSUFBSSxxQ0FBcUMsQ0FBQztJQUMxQyxJQUFJLGtDQUFrQyxDQUFDO0lBQ3ZDLElBQUksMkNBQTJDLENBQUM7SUFDaEQsSUFBSSxrREFBa0QsQ0FBQztJQUN2RCxJQUFJLDJDQUEyQyxDQUFDO0lBQ2hELElBQUksMEJBQTBCLENBQUM7SUFDL0IsSUFBSSxvQkFBb0IsQ0FBQztJQUN6QixJQUFJLEdBQUcsQ0FBQyxNQUFNLEtBQUssV0FBVyxFQUFFO1FBQzVCLDhCQUE4QixHQUFHLElBQUksdURBQTBCLENBQzNELEdBQUcsRUFDSCw0QkFBNEIsS0FBSyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFDakQsU0FBUyxDQUNaLENBQUM7UUFDRixxQ0FBcUMsR0FBRyxJQUFJLG1FQUFnQyxDQUN4RSxHQUFHLEVBQ0gsbUNBQW1DLEtBQUssSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLEVBQ3hELFNBQVMsQ0FDWixDQUFDO1FBQ0Ysa0NBQWtDLEdBQUcsSUFBSSw2REFBNkIsQ0FDbEUsR0FBRyxFQUNILGdDQUFnQyxLQUFLLElBQUksR0FBRyxDQUFDLE1BQU0sRUFBRSxFQUNyRCxTQUFTLENBQ1osQ0FBQztRQUNGLDJDQUEyQyxHQUFHLElBQUksNkVBQXFDLENBQ25GLEdBQUcsRUFDSCx5Q0FBeUMsS0FBSyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFDOUQsU0FBUyxDQUNaLENBQUM7UUFDRixrREFBa0QsR0FBRyxJQUFJLHlGQUEyQyxDQUNoRyxHQUFHLEVBQ0gsZ0RBQWdELEtBQUssSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLEVBQ3JFLFNBQVMsQ0FDWixDQUFDO1FBQ0YsMkNBQTJDLEdBQUcsSUFBSSwrRUFBc0MsQ0FDcEYsR0FBRyxFQUNILHlDQUF5QyxLQUFLLElBQUksR0FBRyxDQUFDLE1BQU0sRUFBRSxFQUM5RCxTQUFTLENBQ1osQ0FBQztRQUNGLDBCQUEwQixHQUFHLElBQUksaURBQXVCLENBQ3BELEdBQUcsRUFDSCx3QkFBd0IsS0FBSyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFDN0MsU0FBUyxDQUNaLENBQUM7UUFDRixvQkFBb0IsR0FBRyxJQUFJLHVDQUFrQixDQUFDLEdBQUcsRUFBRSxrQkFBa0IsS0FBSyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztLQUMxRztJQUVELE9BQU87UUFDSCxtQkFBbUI7UUFDbkIsa0NBQWtDO1FBQ2xDLG1CQUFtQjtRQUNuQixxQkFBcUI7UUFDckIscUJBQXFCO1FBQ3JCLHFCQUFxQjtRQUNyQiw4QkFBOEI7UUFDOUIscUNBQXFDO1FBQ3JDLGtDQUFrQztRQUNsQywyQ0FBMkM7UUFDM0Msa0RBQWtEO1FBQ2xELDJDQUEyQztRQUMzQywwQkFBMEI7UUFDMUIsb0JBQW9CO0tBQ3ZCLENBQUM7QUFDTixDQUFDLENBQUM7QUEzR1csUUFBQSxZQUFZLGdCQTJHdkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZXBsb3ltZW50RW52aXJvbm1lbnQgfSBmcm9tICdAYW16bi9waXBlbGluZXMnO1xuaW1wb3J0IHsgQXBwIH0gZnJvbSAnYXdzLWNkay1saWInO1xuaW1wb3J0IHsgRTJFVGVzdENvbW1vblN0YWNrIH0gZnJvbSAnLi4vc3RhY2tzL2UyZVRlc3RDb21tb25TdGFjayc7XG5pbXBvcnQgeyBFYzJKYXZhVGVzdFN0YWNrIH0gZnJvbSAnLi4vc3RhY2tzL2VjMkphdmFUZXN0U3RhY2snO1xuaW1wb3J0IHsgRWtzSmF2YVRlc3RTdGFjayB9IGZyb20gJy4uL3N0YWNrcy9la3NKYXZhVGVzdFN0YWNrJztcbmltcG9ydCB7IEVrc01ldHJpY0xpbWl0ZXJKYXZhVGVzdFN0YWNrIH0gZnJvbSAnLi4vc3RhY2tzL2Vrc01ldHJpY0xpbWl0ZXJKYXZhVGVzdFN0YWNrJztcbmltcG9ydCB7IEVrc1B5dGhvblRlc3RTdGFjayB9IGZyb20gJy4uL3N0YWNrcy9la3NQeXRob25UZXN0U3RhY2snO1xuaW1wb3J0IHsgRWtzRG90bmV0VGVzdFN0YWNrIH0gZnJvbSAnLi4vc3RhY2tzL2Vrc0RvdG5ldFRlc3RTdGFjayc7XG5pbXBvcnQgeyBBZG90RTJFUmVsZWFzZVRlc3RpbmdTdGFjayB9IGZyb20gJy4uL3N0YWNrcy9yZWxlYXNlLXRlc3RpbmcvYWRvdEUyRVJlbGVhc2VUZXN0aW5nU3RhY2snO1xuaW1wb3J0IHsgQWRvdFB5dGhvbkUyRVJlbGVhc2VUZXN0aW5nU3RhY2sgfSBmcm9tICcuLi9zdGFja3MvcmVsZWFzZS10ZXN0aW5nL2Fkb3RQeXRob25FMkVSZWxlYXNlVGVzdGluZ1N0YWNrJztcbmltcG9ydCB7IENXQWdlbnRFMkVSZWxlYXNlVGVzdGluZ1N0YWNrIH0gZnJvbSAnLi4vc3RhY2tzL3JlbGVhc2UtdGVzdGluZy9jd0FnZW50RTJFUmVsZWFzZVRlc3RpbmdTdGFjayc7XG5pbXBvcnQgeyBDV0FnZW50T3BlcmF0b3JFMkVSZWxlYXNlVGVzdGluZ1N0YWNrIH0gZnJvbSAnLi4vc3RhY2tzL3JlbGVhc2UtdGVzdGluZy9jd0FnZW50T3BlcmF0b3JFMkVSZWxlYXNlVGVzdGluZ1N0YWNrJztcbmltcG9ydCB7IEVuYWJsZW1lbnRTY3JpcHRFMkVSZWxlYXNlVGVzdGluZ1N0YWNrIH0gZnJvbSAnLi4vc3RhY2tzL3JlbGVhc2UtdGVzdGluZy9lbmFibGVtZW50U2NyaXB0RTJFUmVsZWFzZVRlc3RpbmdTdGFjayc7XG5pbXBvcnQgeyBDV0FnZW50T3BlcmF0b3JQeXRob25FMkVSZWxlYXNlVGVzdGluZ1N0YWNrIH0gZnJvbSAnLi4vc3RhY2tzL3JlbGVhc2UtdGVzdGluZy9jd0FnZW50T3BlcmF0b3JQeXRob25FMkVSZWxlYXNlVGVzdGluZ1N0YWNrJztcbmltcG9ydCB7IEVrc1BsYXlncm91bmRTdGFjayB9IGZyb20gJy4uL3N0YWNrcy9la3NQbGF5Z3JvdW5kU3RhY2snO1xuaW1wb3J0IHsgU3RhZ2UgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xuaW1wb3J0IHsgR2l0aHViUnVubmVySW1hZ2VzU3RhY2sgfSBmcm9tICcuLi9zdGFja3MvZ2l0aHViUnVubmVySW1hZ2VzU3RhY2snO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFwcFN0YWNrc1Byb3BzIHtcbiAgICByZWFkb25seSBlbnY6IERlcGxveW1lbnRFbnZpcm9ubWVudDtcbiAgICByZWFkb25seSBzdGFnZTogU3RhZ2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwU3RhY2tzIHtcbiAgICByZWFkb25seSBla3NfamF2YV90ZXN0X3N0YWNrOiBFa3NKYXZhVGVzdFN0YWNrO1xuICAgIHJlYWRvbmx5IGVrc19tZXRyaWNfbGltaXRlcl9qYXZhX3Rlc3Rfc3RhY2s6IEVrc01ldHJpY0xpbWl0ZXJKYXZhVGVzdFN0YWNrO1xuICAgIHJlYWRvbmx5IGVjMl9qYXZhX3Rlc3Rfc3RhY2s6IEVjMkphdmFUZXN0U3RhY2s7XG4gICAgcmVhZG9ubHkgZWtzX3B5dGhvbl90ZXN0X3N0YWNrOiBFa3NQeXRob25UZXN0U3RhY2s7XG4gICAgcmVhZG9ubHkgZWtzX2RvdG5ldF90ZXN0X3N0YWNrOiBFa3NEb3RuZXRUZXN0U3RhY2s7XG4gICAgcmVhZG9ubHkgZTJlX3Rlc3RfY29tbW9uX3N0YWNrOiBFMkVUZXN0Q29tbW9uU3RhY2s7XG4gICAgcmVhZG9ubHkgYWRvdF9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrOiBBZG90RTJFUmVsZWFzZVRlc3RpbmdTdGFjayB8IHVuZGVmaW5lZDtcbiAgICByZWFkb25seSBhZG90X3B5dGhvbl9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrOiBBZG90UHl0aG9uRTJFUmVsZWFzZVRlc3RpbmdTdGFjayB8IHVuZGVmaW5lZDtcbiAgICByZWFkb25seSBjd19hZ2VudF9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrOiBDV0FnZW50RTJFUmVsZWFzZVRlc3RpbmdTdGFjayB8IHVuZGVmaW5lZDtcbiAgICByZWFkb25seSBjd19hZ2VudF9vcGVyYXRvcl9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrOiBDV0FnZW50T3BlcmF0b3JFMkVSZWxlYXNlVGVzdGluZ1N0YWNrIHwgdW5kZWZpbmVkO1xuICAgIHJlYWRvbmx5IGN3X2FnZW50X29wZXJhdG9yX3B5dGhvbl9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrOlxuICAgICAgICB8IENXQWdlbnRPcGVyYXRvclB5dGhvbkUyRVJlbGVhc2VUZXN0aW5nU3RhY2tcbiAgICAgICAgfCB1bmRlZmluZWQ7XG4gICAgcmVhZG9ubHkgZW5hYmxlbWVudF9zY3JpcHRfZTJlX3JlbGVhc2VfdGVzdGluZ19zdGFjazogRW5hYmxlbWVudFNjcmlwdEUyRVJlbGVhc2VUZXN0aW5nU3RhY2sgfCB1bmRlZmluZWQ7XG4gICAgcmVhZG9ubHkgZ2l0aHViX3J1bm5lcl9pbWFnZXNfc3RhY2s6IEdpdGh1YlJ1bm5lckltYWdlc1N0YWNrIHwgdW5kZWZpbmVkO1xuICAgIHJlYWRvbmx5IGVrc19wbGF5Z3JvdW5kX3N0YWNrOiBFa3NQbGF5Z3JvdW5kU3RhY2sgfCB1bmRlZmluZWQ7XG59XG5cbi8vIExpc3Qgb2Ygc3RhY2tzIHRoYXQgd2lsbCBiZSBhZGRlZCB0byBlYWNoIGFjY291bnRcbmV4cG9ydCBjb25zdCBhZGRBcHBTdGFja3MgPSAoYXBwOiBBcHAsIHsgZW52LCBzdGFnZSB9OiBBcHBTdGFja3NQcm9wcyk6IEFwcFN0YWNrcyA9PiB7XG4gICAgY29uc3Qgc3RhY2tQcm9wID0ge1xuICAgICAgICBlbnY6IGVudixcbiAgICAgICAgc3RhZ2U6IHN0YWdlLFxuICAgIH07XG5cbiAgICBjb25zdCBla3NfamF2YV90ZXN0X3N0YWNrOiBFa3NKYXZhVGVzdFN0YWNrID0gbmV3IEVrc0phdmFUZXN0U3RhY2soXG4gICAgICAgIGFwcCxcbiAgICAgICAgYGFwcC1zaWduYWxzLWphdmEtZTJlLWVrcy0ke3N0YWdlfS0ke2Vudi5yZWdpb259YCxcbiAgICAgICAgc3RhY2tQcm9wLFxuICAgICk7XG5cbiAgICBjb25zdCBla3NfbWV0cmljX2xpbWl0ZXJfamF2YV90ZXN0X3N0YWNrOiBFa3NNZXRyaWNMaW1pdGVySmF2YVRlc3RTdGFjayA9IG5ldyBFa3NNZXRyaWNMaW1pdGVySmF2YVRlc3RTdGFjayhcbiAgICAgICAgYXBwLFxuICAgICAgICBgYXBwLXNpZ25hbHMtamF2YS1lMmUtZWtzLW1ldHJpYy1saW1pdGUtJHtzdGFnZX0tJHtlbnYucmVnaW9ufWAsXG4gICAgICAgIHN0YWNrUHJvcCxcbiAgICApO1xuXG4gICAgY29uc3QgZWMyX2phdmFfdGVzdF9zdGFjazogRWMySmF2YVRlc3RTdGFjayA9IG5ldyBFYzJKYXZhVGVzdFN0YWNrKFxuICAgICAgICBhcHAsXG4gICAgICAgIGBhcHAtc2lnbmFscy1qYXZhLWUyZS1lYzItJHtzdGFnZX0tJHtlbnYucmVnaW9ufWAsXG4gICAgICAgIHN0YWNrUHJvcCxcbiAgICApO1xuXG4gICAgY29uc3QgZWtzX3B5dGhvbl90ZXN0X3N0YWNrOiBFa3NQeXRob25UZXN0U3RhY2sgPSBuZXcgRWtzUHl0aG9uVGVzdFN0YWNrKFxuICAgICAgICBhcHAsXG4gICAgICAgIGBhcHAtc2lnbmFscy1weXRob24tZTJlLWVrcy0ke3N0YWdlfS0ke2Vudi5yZWdpb259YCxcbiAgICAgICAgc3RhY2tQcm9wLFxuICAgICk7XG5cbiAgICBjb25zdCBla3NfZG90bmV0X3Rlc3Rfc3RhY2s6IEVrc0RvdG5ldFRlc3RTdGFjayA9IG5ldyBFa3NEb3RuZXRUZXN0U3RhY2soXG4gICAgICAgIGFwcCxcbiAgICAgICAgYGFwcC1zaWduYWxzLWRvdG5ldC1lMmUtZWtzLSR7c3RhZ2V9LSR7ZW52LnJlZ2lvbn1gLFxuICAgICAgICBzdGFja1Byb3AsXG4gICAgKTtcblxuICAgIGNvbnN0IGUyZV90ZXN0X2NvbW1vbl9zdGFjazogRTJFVGVzdENvbW1vblN0YWNrID0gbmV3IEUyRVRlc3RDb21tb25TdGFjayhcbiAgICAgICAgYXBwLFxuICAgICAgICBgZ2l0aHViLXByb3ZpZGVyLXJvbGUtJHtzdGFnZX0tJHtlbnYucmVnaW9ufWAsXG4gICAgICAgIHN0YWNrUHJvcCxcbiAgICApO1xuXG4gICAgLy8gVGhlIHJlbGVhc2UgdGVzdGluZyBzdGFja3Mgd2lsbCBiZSBhZGRlZCB0byB0aGUgdXMtZWFzdC0xIGFjY291bnQuIFRoZXJlIGlzIGEgbGltaXQgb24gaG93IG1hbnkgRUtTIGNsdXN0ZXJzXG4gICAgLy8gbWF5IGJlIGFkZGVkIHRvIGVhY2ggYWNjb3VudCwgYW5kIHdpbGwgbmVlZCB0byByZXF1ZXN0IGEgc2VydmljZSBxdW90ZSBpbmNyZWFzZSBpZiBtb3JlIGFyZSBuZWVkZWQuXG4gICAgbGV0IGFkb3RfZTJlX3JlbGVhc2VfdGVzdGluZ19zdGFjaztcbiAgICBsZXQgYWRvdF9weXRob25fZTJlX3JlbGVhc2VfdGVzdGluZ19zdGFjaztcbiAgICBsZXQgY3dfYWdlbnRfZTJlX3JlbGVhc2VfdGVzdGluZ19zdGFjaztcbiAgICBsZXQgY3dfYWdlbnRfb3BlcmF0b3JfZTJlX3JlbGVhc2VfdGVzdGluZ19zdGFjaztcbiAgICBsZXQgY3dfYWdlbnRfb3BlcmF0b3JfcHl0aG9uX2UyZV9yZWxlYXNlX3Rlc3Rpbmdfc3RhY2s7XG4gICAgbGV0IGVuYWJsZW1lbnRfc2NyaXB0X2UyZV9yZWxlYXNlX3Rlc3Rpbmdfc3RhY2s7XG4gICAgbGV0IGdpdGh1Yl9ydW5uZXJfaW1hZ2VzX3N0YWNrO1xuICAgIGxldCBla3NfcGxheWdyb3VuZF9zdGFjaztcbiAgICBpZiAoZW52LnJlZ2lvbiA9PT0gJ3VzLWVhc3QtMScpIHtcbiAgICAgICAgYWRvdF9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrID0gbmV3IEFkb3RFMkVSZWxlYXNlVGVzdGluZ1N0YWNrKFxuICAgICAgICAgICAgYXBwLFxuICAgICAgICAgICAgYGFkb3QtZTJlLXJlbGVhc2UtdGVzdGluZy0ke3N0YWdlfS0ke2Vudi5yZWdpb259YCxcbiAgICAgICAgICAgIHN0YWNrUHJvcCxcbiAgICAgICAgKTtcbiAgICAgICAgYWRvdF9weXRob25fZTJlX3JlbGVhc2VfdGVzdGluZ19zdGFjayA9IG5ldyBBZG90UHl0aG9uRTJFUmVsZWFzZVRlc3RpbmdTdGFjayhcbiAgICAgICAgICAgIGFwcCxcbiAgICAgICAgICAgIGBhZG90LXB5dGhvbi1lMmUtcmVsZWFzZS10ZXN0aW5nLSR7c3RhZ2V9LSR7ZW52LnJlZ2lvbn1gLFxuICAgICAgICAgICAgc3RhY2tQcm9wLFxuICAgICAgICApO1xuICAgICAgICBjd19hZ2VudF9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrID0gbmV3IENXQWdlbnRFMkVSZWxlYXNlVGVzdGluZ1N0YWNrKFxuICAgICAgICAgICAgYXBwLFxuICAgICAgICAgICAgYGN3LWFnZW50LWUyZS1yZWxlYXNlLXRlc3RpbmctJHtzdGFnZX0tJHtlbnYucmVnaW9ufWAsXG4gICAgICAgICAgICBzdGFja1Byb3AsXG4gICAgICAgICk7XG4gICAgICAgIGN3X2FnZW50X29wZXJhdG9yX2UyZV9yZWxlYXNlX3Rlc3Rpbmdfc3RhY2sgPSBuZXcgQ1dBZ2VudE9wZXJhdG9yRTJFUmVsZWFzZVRlc3RpbmdTdGFjayhcbiAgICAgICAgICAgIGFwcCxcbiAgICAgICAgICAgIGBjdy1hZ2VudC1vcGVyYXRvci1lMmUtcmVsZWFzZS10ZXN0aW5nLSR7c3RhZ2V9LSR7ZW52LnJlZ2lvbn1gLFxuICAgICAgICAgICAgc3RhY2tQcm9wLFxuICAgICAgICApO1xuICAgICAgICBjd19hZ2VudF9vcGVyYXRvcl9weXRob25fZTJlX3JlbGVhc2VfdGVzdGluZ19zdGFjayA9IG5ldyBDV0FnZW50T3BlcmF0b3JQeXRob25FMkVSZWxlYXNlVGVzdGluZ1N0YWNrKFxuICAgICAgICAgICAgYXBwLFxuICAgICAgICAgICAgYGN3LWFnZW50LW9wZXJhdG9yLXB5dGhvbi1lMmUtcmVsZWFzZS10ZXN0aW5nLSR7c3RhZ2V9LSR7ZW52LnJlZ2lvbn1gLFxuICAgICAgICAgICAgc3RhY2tQcm9wLFxuICAgICAgICApO1xuICAgICAgICBlbmFibGVtZW50X3NjcmlwdF9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrID0gbmV3IEVuYWJsZW1lbnRTY3JpcHRFMkVSZWxlYXNlVGVzdGluZ1N0YWNrKFxuICAgICAgICAgICAgYXBwLFxuICAgICAgICAgICAgYGVuYWJsZW1lbnQtc2NyaXB0LWUyZS1yZWxlYXNlLXRlc3RpbmctJHtzdGFnZX0tJHtlbnYucmVnaW9ufWAsXG4gICAgICAgICAgICBzdGFja1Byb3AsXG4gICAgICAgICk7XG4gICAgICAgIGdpdGh1Yl9ydW5uZXJfaW1hZ2VzX3N0YWNrID0gbmV3IEdpdGh1YlJ1bm5lckltYWdlc1N0YWNrKFxuICAgICAgICAgICAgYXBwLFxuICAgICAgICAgICAgYGdpdGh1Yi1ydW5uZXItaW1hZ2VzLSR7c3RhZ2V9LSR7ZW52LnJlZ2lvbn1gLFxuICAgICAgICAgICAgc3RhY2tQcm9wLFxuICAgICAgICApO1xuICAgICAgICBla3NfcGxheWdyb3VuZF9zdGFjayA9IG5ldyBFa3NQbGF5Z3JvdW5kU3RhY2soYXBwLCBgZWtzLXBsYXlncm91bmQtJHtzdGFnZX0tJHtlbnYucmVnaW9ufWAsIHN0YWNrUHJvcCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZWtzX2phdmFfdGVzdF9zdGFjayxcbiAgICAgICAgZWtzX21ldHJpY19saW1pdGVyX2phdmFfdGVzdF9zdGFjayxcbiAgICAgICAgZWMyX2phdmFfdGVzdF9zdGFjayxcbiAgICAgICAgZWtzX3B5dGhvbl90ZXN0X3N0YWNrLFxuICAgICAgICBla3NfZG90bmV0X3Rlc3Rfc3RhY2ssXG4gICAgICAgIGUyZV90ZXN0X2NvbW1vbl9zdGFjayxcbiAgICAgICAgYWRvdF9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrLFxuICAgICAgICBhZG90X3B5dGhvbl9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrLFxuICAgICAgICBjd19hZ2VudF9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrLFxuICAgICAgICBjd19hZ2VudF9vcGVyYXRvcl9lMmVfcmVsZWFzZV90ZXN0aW5nX3N0YWNrLFxuICAgICAgICBjd19hZ2VudF9vcGVyYXRvcl9weXRob25fZTJlX3JlbGVhc2VfdGVzdGluZ19zdGFjayxcbiAgICAgICAgZW5hYmxlbWVudF9zY3JpcHRfZTJlX3JlbGVhc2VfdGVzdGluZ19zdGFjayxcbiAgICAgICAgZ2l0aHViX3J1bm5lcl9pbWFnZXNfc3RhY2ssXG4gICAgICAgIGVrc19wbGF5Z3JvdW5kX3N0YWNrLFxuICAgIH07XG59O1xuIl19